!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t){var u=e,r=t,a=n(u,r),i=[];return u=a[0],r=a[1],a=a[2],function(e){i=[];for(var t=0,n=u.length;t<n;t++){i[t]=[u[t][0]];var r;r=u[t]?u[t].length:0;for(var l=1;l<r;l++)i[t][l]=+u[t][l]+e*a[t][l];i[t]=i[t].join(" ")}return i.join(" ")}}function n(e,t){var n,r=[],a=[],l=0,o=0,f=i(e,t);for(f=u(f[0],f[1]),r=f[1],a=f[0],n=[],l=0,o=a.length;l<o;l++){n[l]=[0];var s;s=a[l]?a[l].length:0;for(var h=1;h<s;h++)n[l][h]=r[l][h]-a[l][h]}return[a,r,n]}function u(e,t){function n(e,t){function n(e){for(var t=e.length;t--&&e[t].join("")===e[t-1].join("");)e.pop()}function u(e){for(var t="",n=0,u=e.length;n<u;++n)t+=e[n].join(" ");return t}var r,a,i="",l="";return y.setAttribute("d","M300 10 L300 300 C50 310,50 640,350 650C600 640,600 310,400 300 L400 10 L295 10"),r=y.getTotalLength(),a=y.getPointAtLength(10),r<1829.1||r>1829.2||(300!==Math.round(a.x)||20!==Math.round(a.y)||(n(e),n(t),i=u(e),l=u(t),!(i.split(/[Mm]/).length>2||l.split(/[Mm]/).length>2)&&e.length===t.length))}function u(e){var t=[],n=0,u=e.length;if("string"==typeof e)return e;for(n=0;n<u;++n){if(!e[n].join)return;n&&e[n+1]&&"M"===e[n+1][0]&&"M"===e[n][0]||t.push(e[n].join(" "))}for(t=t.join(""),t=t.split(/[Mm]/).slice(1),n=0,u=t.length;n<u;++n)t[n]="M"+t[n];return t}function r(e){var t=0,n=0,u=[];for(e=e||[],n=e.length,t=0;t<n;++t)e[t].length-1&&u.push(e[t].join(" "));return u.join("")}function i(e){for(var t=e.length;t-- -1;)e[t].toString()===e[t-1].toString()&&e.pop()}function l(e,t){for(var n=[],u=[],r=e.length,a=0,i=0,l=0,o=0,f=0,s=t-r;s>=0;)a=e.length-1,e.push(e.slice(a)),--s;for(r=e.length,a=0;a<=t;++a)u.push(Math.round(a/t*r));for(a=0,i=u.length-1;a<i;++a)n.push(e.slice(u[a],u[a+1])),"M"!==n[a][0][0]&&"m"!==n[a][0][0]&&(o=n[a-1].length-1,l=n[a-1][o][1],f=n[a-1][o][2],n[a].unshift(["M",l,f]));return n}function o(e){var t=[],n=[],u=[],r=0,a=0,i=!0;if(0!==e){for(e>0?(t=g,i=!1):(e=-e,t=c),r=0,a=t.length;r<a;++r)n.push(1);for(;e--;)--r,r<0&&(r=a-1),n[r]++;for(r=0;r<a;++r)1===n[r]?u.push(t[r]):u.push.apply(u,l(t[r],n[r]));i?c=u:g=u}}var f,s=[],h=[],c=u(e),g=u(t),p=0,x=0,d=document.createElementNS&&document.createElementNS.bind(document),y=d&&d("http://www.w3.org/2000/svg","path");if(!c||!g||!y)return[e,t];if(n(e,t))return[e,t];if(!e||!t)return[e,t];if(!document.createElementNS)return[e,t];if(c=u(e),g=u(t),c.join().indexOf("undefined")!==-1)return[e,t];if(g.join().indexOf("undefined")!==-1)return[e,t];if(!y.getTotalLength||!y.getPointAtLength)return[e,t];for(x=Math.max(c.length,g.length),p=0;p<x;++p)f=a(c[p],g[p]),c[p]=f[0],g[p]=f[1];for(i(c),i(g),o(c.length-g.length),x=Math.max(c.length,g.length),p=0;p<x;++p)f=a(r(c[p]),r(g[p])),c[p]=f[0],g[p]=f[1];for(p=0,x=c.length;p<x;++p)s=s.concat(c[p]);for(p=0,x=g.length;p<x;++p)h=h.concat(g[p]);return[s,h]}function r(e,t){function n(e){var t=0,n=0;for(e=e.split(/[MCLmcl]/).slice(1),t=0,n=e.length;t<n;++t)e[t]=e[t].split(" ").slice(1),t||e[t].unshift("M"),t&&(2===e[t].length&&e[t].unshift("L")||e[t].unshift("C"));return e}function u(e,t){var n,u,r=0,a=e.length;for(r=0,a=e.length;r<a;++r)n=e[r].join(" "),u=e[r],"C"===u[0]&&u[3]===u[5]&&u[4]===u[6]?e[r].stringValue=["L",u[3],u[4]].join(" "):u.stringValue=n,t[u.stringValue]&&t[u.stringValue].push(r),t[u.stringValue]||(t[u.stringValue]=[r])}function r(e,t,n,u,r){for(var a,i=n,l=0,o=0;i<u;++i)if(a=t[e[i].stringValue])for(l=0,o=a.length;l<o;++l)if(a[l]>=r)return{index:i,mapValue:a[l],diff:i-n};return-1}function a(e){var t=e.length-1;return["M",e[t-1],e[t]].join(" ")}function i(e){return e.join("")}var l,o,f=0,s=0,h=0,c=0,g=0,p=0,x={},d={},y=[],v=[],b=-1,M=-1,m=!0;for(e=n(e),t=n(t),u(e,x),u(t,d),h=e.length,c=t.length,f=0,s=0;f<h&&s<c;){if(++b,++M,y[b]=[],v[M]=[],m=e[f].stringValue===t[s].stringValue,f&&(y[b].push(a(e[f-1])),v[M].push(a(t[s-1]))),m)for(;f<h&&s<c&&e[f].stringValue===t[s].stringValue;)y[b].push(e[f].stringValue),v[M].push(t[s].stringValue),++f,++s;else{for(l=r(e,d,f,h,s),o=r(t,x,s,c,f),g=l.index,p=l.mapValue,(!~l||l.diff>o.diff)&&(g=o.mapValue,p=o.index),~l||~o||(g=h-1,p=c-1);f<=g;)y[b].push(e[f].stringValue),++f;for(;s<=p;)v[M].push(t[s].stringValue),++s}y[b]=i(y[b]),v[M]=i(v[M])}if(f<h){for(++b,y[b]=[],y[b].push(a(e[f-1])),++M,v[M]=[],v[M].push(a(t[s-1]));f<h;)y[b].push(e[f].stringValue),++f;y[b]=i(y[b])}if(s<c){for(++b,y[b]=[],y[b].push(a(e[f-1])),++M,v[M]=[],v[M].push(a(t[s-1]));s<c;)v[M].push(t[s].stringValue),++s;v[M]=i(v[M])}return[y,v]}function a(e,t){function n(e,t){var n,u,r=0,a={},i=0,l=0,o=[],f=[],s=0,h=Math.round;for(n=document.createElementNS("http://www.w3.org/2000/svg","path"),n.setAttribute("d",e),u=document.createElementNS("http://www.w3.org/2000/svg","path"),u.setAttribute("d",t),i=n.getTotalLength(),l=u.getTotalLength(),s=.15*Math.max(i,l),s=Math.ceil(s),(!s||!isFinite(s)||s<10)&&(s=10),r=0;r<=s;++r)a=n.getPointAtLength(r/s*i),o.push([r?"L":"M",h(a.x),h(a.y)]),a=u.getPointAtLength(r/s*l),f.push([r?"L":"M",h(a.x),h(a.y)]);return[o,f]}var u,a,i=0,l=0,o=[],f=[];for(e&&"M  "!==e||(e=t.split(" ").slice(0,3).join(" ").replace("L","")),t&&"M  "!==t||(t=e.split(" ").slice(0,3).join(" ").replace("L","")),u=r(e,t),i=0,l=u[0].length;i<l;++i)a=n(u[0][i],u[1][i]),i?(o=o.concat(a[0].slice(1)),f=f.concat(a[1].slice(1))):(o=o.concat(a[0]),f=f.concat(a[1]));return[o,f]}function i(e,t){for(var n=l(e),u=l(t),r=Math.max,a="concat",i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=(function(e,t){var n,u;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":break;case"S":n=t.x+(t.x-(t.bx||t.x)),u=t.y+(t.y-(t.by||t.y)),e=["C",n,u][a](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][a](s(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][a](s(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][a](f(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][a](f(t.x,t.y,e[1],t.y));break;case"V":e=["C"][a](f(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][a](f(t.x,t.y,t.X,t.Y))}return e}),c=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)e.splice(t++,0,["C"][a](i.splice(0,6)));e.splice(t,1),x=r(n.length,u&&u.length||0)}},g=function(e,t,a,i,l){e&&t&&"M"==e[l][0]&&"M"!=t[l][0]&&(t.splice(l,0,["M",i.x,i.y]),a.bx=0,a.by=0,a.x=e[l][1],a.y=e[l][2],x=r(n.length,u&&u.length||0))},p=0,x=r(n.length,u&&u.length||0);p<x;p++){n[p]=h(n[p],i),c(n,p),u&&(u[p]=h(u[p],o)),u&&c(u,p),g(n,u,i,o,p),g(u,n,o,i,p);var d=n[p],y=u&&u[p],v=d.length,b=u&&y.length;i.x=d[v-2],i.y=d[v-1],i.bx=parseFloat(d[v-4])||i.x,i.by=parseFloat(d[v-3])||i.y,o.bx=u&&(parseFloat(y[b-4])||o.x),o.by=u&&(parseFloat(y[b-3])||o.y),o.x=u&&y[b-2],o.y=u&&y[b-1]}return[n,u]}function l(e){var t,e=o(e),n="concat";if(!e||!e.length)return t=[["M",0,0]];var u=0,r=0,a=0,i=0,l=0;t=[],"M"==e[0][0]&&(u=+e[0][1],r=+e[0][2],a=u,i=r,l++,t[0]=["M",u,r]);for(var f,s,h=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),c=l,g=e.length;c<g;c++){if(t.push(f=[]),s=e[c],s[0]!=String.prototype.toUpperCase.call(s[0]))switch(f[0]=String.prototype.toUpperCase.call(s[0]),f[0]){case"A":f[1]=s[1],f[2]=s[2],f[3]=s[3],f[4]=s[4],f[5]=s[5],f[6]=+(s[6]+u),f[7]=+(s[7]+r);break;case"V":f[1]=+s[1]+r;break;case"H":f[1]=+s[1]+u;break;case"R":for(var p=[u,r][n](s.slice(1)),x=2,d=p.length;x<d;x++)p[x]=+p[x]+u,p[++x]=+p[x]+r;t.pop(),t=t[n](catmullRom2bezier(p,h));break;case"M":a=+s[1]+u,i=+s[2]+r;default:for(x=1,d=s.length;x<d;x++)f[x]=+s[x]+(x%2?u:r)}else if("R"==s[0])p=[u,r][n](s.slice(1)),t.pop(),t=t[n](catmullRom2bezier(p,h)),f=["R"][n](s.slice(-2));else for(var y=0,v=s.length;y<v;y++)f[y]=s[y];switch(f[0]){case"Z":u=a,r=i;break;case"H":u=f[1];break;case"V":r=f[1];break;case"M":a=f[f.length-2],i=f[f.length-1];default:u=f[f.length-2],r=f[f.length-1]}}return t}function o(e){var t=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,n=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,u="concat";if(!e)return null;var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[];return a.length||String(e).replace(t,function(e,t,i){var l=[],o=t.toLowerCase();if(i.replace(n,function(e,t){t&&l.push(+t)}),"m"==o&&l.length>2&&(a.push([t][u](l.splice(0,2))),o="l",t="m"==t?"l":"L"),"r"==o)a.push([t][u](l));else for(;l.length>=r[o]&&(a.push([t][u](l.splice(0,r[o]))),r[o]););}),a}function f(e,t,n,u){return[e,t,n,u,n,u]}function s(e,t,n,u,r,a){var i=1/3,l=2/3;return[i*e+l*n,i*t+l*u,i*r+l*n,i*a+l*u,r,a]}e.morphPath=t,Object.defineProperty(e,"__esModule",{value:!0})});